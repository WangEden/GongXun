# 任务流程：

任务一：二维码读取

任务二：前往原料区、校准位置、按正确顺序取物块

任务三：前往粗加工区、校准位置、继续移动、校准、放完三个物块（根据读取到的任务顺序决定停在哪个物块前面）

任务四：前往暂存区、校准位置、继续移动、校准、放完三个物块

任务五：原路返回至原料区、校准位置、按正确顺序取物块

任务六：前往粗加工区、校准位置、继续移动、校准、放完三个物块

任务七：前往暂存区、校准位置、继续移动、校准、放完三个物块

任务八：返回启停区

# 任务具体:

**任务一：二维码读取**<br />
    车向西前往一段距离移动到车道中间，(光流定位)<br />
    前进一段距离到二维码面前，（光流定位）<br />
    读取二维码; （发信号给树莓派，树莓派识别完后回个信号让车继续前进）<br />

**任务二：取物块**<br />
    继续前进一段距离，停靠在圆盘旁边（光流定位）<br />
    机械臂伸出抬到固定高度（动作组）<br />
    **上两步确保视野内有目标物块**<br />
    视觉微调，让物块位于机械爪的下方（串口通信，发一次调一次，调完一次回复一次，以此循环直到对准，对准后，修正里程数据）<br /> 
    之后视觉判断下方的物块颜色是否是想要的，是的话就发出抓取命令，并等待安置好物块可以继续抓取的信号，再重复两次该过程<br />
     

**任务三：放物块**<br />
    巡线，识别车道垂直边界线，完成转弯，
    继续前进一段距离，停靠在粗加工区旁
        两种方法：
            ① 实时判断，是否画面中存在三个圆心，若存在即停下，之后拍照，算出偏差，坐标转换，移动到使得圆心位于视野中央
            ② 前进固定距离后停下，拍照查看画面中的色环的情况，算出偏差，坐标转换，移动到对应色环面前，
                i. 如果色环位置是固定的，利用算法调度，移动到之后两个色环的位置
                ii. 如果色环位置不固定，识别到色环的形状后，生成色环形状的掩膜，提取掩膜区域的颜色，判断后，算出位置偏差，坐标转换，移动到对应色 环面前
    放置完三个物块后，将小车退回到车道中央

任务四：
    巡线，识别车道边线，完成转弯，
    继续前进一段距离，停靠在暂存区 ...


# 注意事项

1. 决赛不知道色环不知道是不是固定位置
    如果是，之后的两个色环靠记忆查找
    如果不是，之后两个色环靠试探查找
2. 决赛不知道抓取和放置顺序是不是一样的
    如果一样，抓物块，就一次抓三个，抓一个，载物盘先转120°，然后机械爪工作，放的时候，载物旁也先转120°，然后机械爪工作，这样刚好顺序符合。
    如果不一样，抓物块的时候要记住物品放在载物旁上时对应的角度，要写一个小计算
3. 是否使用帧差分识别圆盘位置？



## legacy

<!-- **任务一：二维码读取**<br />
    车向西前往一段距离移动到车道中间，(光流定位)<br />
    前进一段距离到二维码面前，（光流定位）<br />
    读取二维码; （发信号给树莓派，树莓派识别完后回个信号让车继续前进）<br />

**任务二：取物块**<br />
    继续前进一段距离，停靠在圆盘旁边（光流定位）<br />
    机械臂伸出抬到固定高度（动作组）<br />
    **上两步确保视野内有目标物块**<br />
    视觉微调，让物块位于机械爪的下方<br /> -->
<!-- 继续前进一段距离，停靠在圆盘旁边，（光流定位）
    三种方法：
    ① 实时判断圆盘是否到达目标区域，及时叫停小车；
    ② 设定好固定距离，如果小车没及时发出叫停信号，就自己叫停；
    ③ 前进一段固定距离后往里靠近，之后拍照，获取位置后，进行校准位置，算出偏差距离后再次移动；
识别物块，校准小车位置使得靠近中央的物块位于视野中央，
    （由于摄像头位置固定，因此物块在视野中的像素面积是固定的，利用这个筛选圆形）
拍照、预处理（改善对比度，去噪）、利用提前存好的阈值判断物块颜色并进行抓取
抓完三个物块后，离开圆盘回到车道中间； -->

<!-- 任务三：
    巡线，识别车道垂直边界线，完成转弯，
    继续前进一段距离，停靠在粗加工区旁
        两种方法：
            ① 实时判断，是否画面中存在三个圆心，若存在即停下，之后拍照，算出偏差，坐标转换，移动到使得圆心位于视野中央
            ② 前进固定距离后停下，拍照查看画面中的色环的情况，算出偏差，坐标转换，移动到对应色环面前，
                i. 如果色环位置是固定的，利用算法调度，移动到之后两个色环的位置
                ii. 如果色环位置不固定，识别到色环的形状后，生成色环形状的掩膜，提取掩膜区域的颜色，判断后，算出位置偏差，坐标转换，移动到对应色 环面前
    放置完三个物块后，将小车退回到车道中央

任务四：
    巡线，识别车道边线，完成转弯，
    继续前进一段距离，停靠在暂存区 ... -->